---
import Icon from "astro-icon";
import { Picture } from "@astrojs/image/components";
import cautionTape  from "~/assets/caution.png";
const widths = [450, 800, 1200];
const sizes = "40vw";
const sizes2 = "100vw"
---
<div id="splash" class="relative h-full overflow-hidden font-black font-heading">
	<div
		class="flex flex-col items-center justify-center h-full gap-2 sm:gap-3 md:gap-4 text-center text-2xl xs:text-4xl sm:text-5xl lg:text-7xl tracking-tighter"
	>
		<span class="text-primary"> Unravel a</span>
		<span
			data-text="Murder Mystery"
			class="glitch layers drop-shadow-title bg-primary py-3 xs:py-4 px-4 xs:px-8 text-invert border border-primary rounded-xl xs:rounded-2xl md:rounded-3xl tracking-tighter"
		>
			<span class="hacker-text"> Murder Mystery</span>
		</span>
	</div>
</div>
<div id="splash-bg" class="opacity-20">
	<div class="absolute top-[30%] md:top-[25%] left-[5%] -rotate-12">
		<Icon class="h-10 md:h-20" name="twemoji:detective" />
	</div>
	<div class="absolute top-[18%] md:top-[14%] right-[14%] md:right-[10%] -rotate-[100deg]">
		<Icon class="h-8 xs:h-10 md:h-24" name="twemoji:magnifying-glass-tilted-right" />
	</div>
	<div class="absolute top-1/4 md:left-1/2 rotate-[15deg] md:rotate-[20deg]">
		<Picture src={cautionTape} widths={widths} sizes={sizes2} alt="tape" />
	</div>
	<div class="absolute top-3/4 md:left-[15%] -rotate-12 md:-rotate-[9deg]">
		<Picture src={cautionTape} widths={widths} sizes={sizes2} alt="tape" />
	</div>
	<div class="absolute top-[67%] left-[44%] md:left-[35%] rotate-[6deg] md:-rotate-[3deg]">
		<Icon class="h-6 xs:h-10 md:h-16" name="twemoji:woman-detective" />
	</div>
	<div class="absolute top-[69%] left-[12%] md:left-[7%] -rotate-[80deg]">
		<Icon class="h-8 xs:h-10 md:h-20" name="twemoji:magnifying-glass-tilted-right" />
	</div>
	<div class="absolute top-[15%] md:top-[12%] right-[40%] md:right-[78%] rotate-6">
		<Icon class="h-10 md:h-24" name="twemoji:laptop" />
	</div>
	<div class="absolute top-[90%] md:top-[85%] right-[10%]">
		<Icon class="h-6 md:h-20" name="twemoji:laptop" />
	</div>
	<div class="absolute top-[62%] md:top-[18%] right-[20%] md:right-[53%] rotate-[9deg] md:rotate-0">
		<Icon class="h-8 xs:h-10 md:h-20" name="twemoji:locked" />
	</div>
	<div class="absolute top-[88%] left-[20%] md:left-[5%] rotate-12">
		<Icon class="h-10 md:h-16" name="twemoji:mobile-phone" />
	</div>
	<div class="absolute top-[87%] left-1/2 md:left-[70%] rotate-[30deg] md:-rotate-[60deg]">
		<Icon class="h-12 md:h-24" name="twemoji:axe" />
	</div>
	<div class="hidden md:block">
		<div class="absolute left-[20%] top-[68%] rotate-12">
			<Icon class="h-12 md:h-24" name="twemoji:red-question-mark" />
		</div>
		<div class="absolute top-[30%] left-0 -rotate-12 md:-rotate-[30deg]">
			<Picture src={cautionTape} widths={widths} sizes={sizes} alt="tape"/>
		</div>
	</div>
</div>

<script>
	const mysteries = ['Murder Mystery', 'Whodunit', 'Vanishing Act', 'Kidnapping Plot', 'Cryptic Riddle'];
	let index = 0;
	const glitch = document.querySelector('.glitch') as HTMLElement;
	const hackerText = document.querySelector('.hacker-text') as HTMLElement;
	
	setInterval(() => {
		hackerText.textContent = mysteries[index];
		glitch.setAttribute('data-text', mysteries[index]);
		index = (index + 1) % (mysteries.length);
	}, 5000);
</script>

<style>
@media(max-height: 500px) {
	#splash-bg {
		display: none;
	}
}
</style>
