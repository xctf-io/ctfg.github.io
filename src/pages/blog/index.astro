---
import { getCollection } from "astro:content";
import SiteLayout from "../../layouts/site-layout.astro";
import FormattedDate from "~/components/formatted-date.astro";
import Header from "~/components/header.astro";

const posts = (await getCollection("blog")).sort(
	(a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf()
);
---

<SiteLayout title="MCPSHSF Blog">
	<Header onBlog={true} />
	<div id="blog-header" class="flex flex-col items-center py-16 mb-8">
		<div class="text-6xl text-center font-medium min-w-full">
			Welcome, hackers
		</div>
		<div class="text-3xl text-center font-extralight">
			Get all the latest updates here!
		</div>
	</div>
	<div class="flex flex-col items-center">
		<div class="grid max-w-7xl grid-cols-1 md:grid-cols-2 gap-16">
			{
				posts.map((post) => (
					<a
						href={`/blog/${post.slug}/`}
						class="max-w-lg border-2 border-offset overflow-hidden shadow-lg bg-secondary p-4"
					>
						<p class="text-gray-300 text-xs">
							<FormattedDate date={post.data.pubDate} />
						</p>
						<img width={1080} height={360} src={post.data.heroImage} alt="" />
						<p class="font-bold font-heading">{post.data.title}</p>
						<p class="font-extralight text-sm">{post.data.description}</p>
					</a>
				))
			}
		</div>
	</div>
	<style>
		#blog-header {
			background-size: 40px 40px;
			background-image: linear-gradient(to right, var(--color-border-low-contrast) 1px, transparent 1px),
				linear-gradient(to bottom, var(--color-border-low-contrast) 1px, transparent 1px);
		}
	</style>
</SiteLayout>
