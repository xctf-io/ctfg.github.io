---
import { getCollection } from "astro:content";
import SiteLayout from "../../layouts/site-layout.astro";
import FormattedDate from "~/components/formatted-date.astro";
import Header from "~/components/header.astro";

const posts = (await getCollection("blog")).sort(
	(a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf()
);
---

<SiteLayout title="MCPSHSF Blog">
	<Header onBlog={true} />
	<div id="blog-header" class="flex flex-col items-center py-12 mb-6 px-4">
		<div class="text-3xl xs:text-6xl text-center font-medium min-w-full">
			Welcome, hackers
		</div>
		<div class="text-lg xs:text-3xl text-center font-extralight">
			Get all the latest updates here!
		</div>
	</div>
	<div class="flex flex-col items-center w-full">
		<div class="grid max-w-7xl grid-cols-1 md:grid-cols-2 gap-16 mx-5 xs:mx-8 md:mx-0">
			{
				posts.map((post) => (
					<a
						href={`/blog/${post.slug}/`}
						class="max-w-lg border border-lowcontrast overflow-hidden drop-shadow-lowcontrast bg-lowcontrast p-4 rounded xs:rounded-md"
					>
						<p class="font-light text-xs text-offset">
							<FormattedDate date={post.data.pubDate} />
						</p>
						<img class="object-cover my-4 rounded xs:rounded-md w-full md:h-60 border border-lowcontrast" src={post.data.heroImage} alt="" />
						<p class="font-bold xs:font-heading xs:text-lg">{post.data.title}</p>
						<p class="font-extralight text-xs xs:text-sm">{post.data.description}</p>
					</a>
				))
			}
		</div>
	</div>
	<style>
		#blog-header {
			background-size: 40px 40px;
			background-image: linear-gradient(to right, var(--color-border-low-contrast) 1px, transparent 1px),
				linear-gradient(to bottom, var(--color-border-low-contrast) 1px, transparent 1px);
		}
	</style>
</SiteLayout>
