---
import { getCollection } from "astro:content";
import SiteLayout from "../../layouts/site-layout.astro";
import FormattedDate from "~/components/formatted-date.astro";
import Header from "~/components/header.astro";

const posts = (await getCollection("blog")).sort(
	(a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf()
);
---

<SiteLayout title="MCPSHSF Blog">
  <Header onBlog={true} />
  <div class="flex flex-col items-center pt-32">
    <div class="text-6xl text-center font-medium min-w-full">
      Welcome, hackers
    </div>
    <div class="text-3xl text-center font-extralight">
      Get all the latest updates here!
    </div>
    <div class="grid max-w-7xl grid-cols-1 md:grid-cols-3 gap-4 ">
        {
          posts.map((post) => (
            <a
              href={`/blog/${post.slug}/`}
              class="max-w-lg border border-offset overflow-hidden shadow-lg bg-secondary p-4"
            >
              <p class="text-gray-300 text-xs">
                <FormattedDate date={post.data.pubDate} />
              </p>
              <img width={720} height={360} src={post.data.heroImage} alt="" />
              <p class="font-bold font-heading">{post.data.title}</p>
              <p>{post.data.description}</p>
            </a>
          ))
        }
    </div>
  </div>
</SiteLayout>
